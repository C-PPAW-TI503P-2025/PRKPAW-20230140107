{"ast":null,"code":"var _jsxFileName = \"/Users/yusuf/Documents/PPAW/107-node-server/20230140107-react-app/src/components/PresensiPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getToken() {\n  return localStorage.getItem('token');\n}\nfunction PresensiPage() {\n  _s();\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  const [coords, setCoords] = useState(null); // { lat, lng }\n\n  // Ambil lokasi pengguna\n  const getLocation = () => {\n    setError('');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        setCoords({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n      }, err => {\n        setError('Gagal mendapatkan lokasi: ' + err.message);\n      }, {\n        enableHighAccuracy: true,\n        timeout: 10000\n      });\n    } else {\n      setError('Geolocation tidak didukung oleh browser ini.');\n    }\n  };\n  useEffect(() => {\n    getLocation();\n  }, []);\n  const handleCheckIn = async () => {\n    setError('');\n    setMessage('');\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${getToken()}`\n        }\n      };\n      if (!coords) {\n        setError('Lokasi belum didapatkan. Mohon izinkan akses lokasi.');\n        return;\n      }\n      const response = await axios.post('/api/presensi/check-in', {\n        latitude: coords.lat,\n        longitude: coords.lng\n      }, config);\n      setMessage(response.data.message || 'Check-in berhasil');\n    } catch (err) {\n      setError(err.response ? err.response.data.message || JSON.stringify(err.response.data) : 'Check-in gagal');\n    }\n  };\n  const handleCheckOut = async () => {\n    setError('');\n    setMessage('');\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${getToken()}`\n        }\n      };\n      const response = await axios.post('/api/presensi/check-out', {}, config);\n      setMessage(response.data.message || 'Check-out berhasil');\n    } catch (err) {\n      setError(err.response ? err.response.data.message || JSON.stringify(err.response.data) : 'Check-out gagal');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold mb-6 text-gray-800\",\n        children: \"Lakukan Presensi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-600 mb-4\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600 mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }, this), coords && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mb-4\",\n        children: [\"Lokasi saat ini: \", coords.lat.toFixed(6), \", \", coords.lng.toFixed(6)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), !coords && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500 mb-4\",\n        children: \"Sedang mengambil lokasi...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: getLocation,\n          className: \"text-sm text-blue-600 underline\",\n          children: \"Ambil lokasi ulang\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCheckIn,\n          className: \"w-full py-3 px-4 bg-green-600 text-white font-semibold rounded-md shadow-sm hover:bg-green-700\",\n          children: \"Check-In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCheckOut,\n          className: \"w-full py-3 px-4 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700\",\n          children: \"Check-Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(PresensiPage, \"mzbIlNGL34YfxbTWdxbNcOukBh8=\");\n_c = PresensiPage;\nexport default PresensiPage;\nvar _c;\n$RefreshReg$(_c, \"PresensiPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","getToken","localStorage","getItem","PresensiPage","_s","message","setMessage","error","setError","coords","setCoords","getLocation","navigator","geolocation","getCurrentPosition","position","lat","latitude","lng","longitude","err","enableHighAccuracy","timeout","handleCheckIn","config","headers","Authorization","response","post","data","JSON","stringify","handleCheckOut","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","onClick","_c","$RefreshReg$"],"sources":["/Users/yusuf/Documents/PPAW/107-node-server/20230140107-react-app/src/components/PresensiPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction getToken() {\n  return localStorage.getItem('token');\n}\n\nfunction PresensiPage() {\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  const [coords, setCoords] = useState(null); // { lat, lng }\n\n  // Ambil lokasi pengguna\n  const getLocation = () => {\n    setError('');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCoords({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (err) => {\n          setError('Gagal mendapatkan lokasi: ' + err.message);\n        },\n        { enableHighAccuracy: true, timeout: 10000 }\n      );\n    } else {\n      setError('Geolocation tidak didukung oleh browser ini.');\n    }\n  };\n\n  useEffect(() => {\n    getLocation();\n  }, []);\n\n  const handleCheckIn = async () => {\n    setError('');\n    setMessage('');\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${getToken()}`,\n        },\n      };\n      if (!coords) {\n        setError('Lokasi belum didapatkan. Mohon izinkan akses lokasi.');\n        return;\n      }\n\n      const response = await axios.post(\n        '/api/presensi/check-in',\n        {\n          latitude: coords.lat,\n          longitude: coords.lng,\n        },\n        config\n      );\n      setMessage(response.data.message || 'Check-in berhasil');\n    } catch (err) {\n      setError(err.response ? (err.response.data.message || JSON.stringify(err.response.data)) : 'Check-in gagal');\n    }\n  };\n\n  const handleCheckOut = async () => {\n    setError('');\n    setMessage('');\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${getToken()}`,\n        },\n      };\n      const response = await axios.post('/api/presensi/check-out', {}, config);\n      setMessage(response.data.message || 'Check-out berhasil');\n    } catch (err) {\n      setError(err.response ? (err.response.data.message || JSON.stringify(err.response.data)) : 'Check-out gagal');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n      <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center\">\n        <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">Lakukan Presensi</h2>\n\n        {message && <p className=\"text-green-600 mb-4\">{message}</p>}\n        {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n\n        {coords && (\n          <p className=\"text-sm text-gray-600 mb-4\">Lokasi saat ini: {coords.lat.toFixed(6)}, {coords.lng.toFixed(6)}</p>\n        )}\n\n        {!coords && (\n          <p className=\"text-sm text-gray-500 mb-4\">Sedang mengambil lokasi...</p>\n        )}\n\n        <div className=\"mb-4\">\n          <button onClick={getLocation} className=\"text-sm text-blue-600 underline\">Ambil lokasi ulang</button>\n        </div>\n\n        <div className=\"flex space-x-4\">\n          <button\n            onClick={handleCheckIn}\n            className=\"w-full py-3 px-4 bg-green-600 text-white font-semibold rounded-md shadow-sm hover:bg-green-700\"\n          >\n            Check-In\n          </button>\n\n          <button\n            onClick={handleCheckOut}\n            className=\"w-full py-3 px-4 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700\"\n          >\n            Check-Out\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PresensiPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}